<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1000" width="1400" height="1000">
  <!-- Background -->
  <rect width="1400" height="1000" fill="#f8fafc"/>
  
  <!-- Title -->
  <rect x="0" y="0" width="1400" height="60" fill="#1e293b"/>
  <text x="700" y="38" font-family="Arial, sans-serif" font-size="26" font-weight="bold" text-anchor="middle" fill="#ffffff">
    Blogify - Data Model
  </text>
  
  <!-- Cognito User Pool -->
  <g id="cognito">
    <rect x="100" y="120" width="380" height="320" fill="#ffffff" stroke="#8b5cf6" stroke-width="3" rx="10"/>
    <rect x="100" y="120" width="380" height="50" fill="#8b5cf6" rx="10"/>
    <text x="290" y="152" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#ffffff">
      AWS Cognito User Pool
    </text>
    
    <!-- User attributes -->
    <text x="120" y="200" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1e293b">User Attributes:</text>
    <text x="140" y="225" font-family="Arial, sans-serif" font-size="12" fill="#475569">• email (username) - String</text>
    <text x="140" y="245" font-family="Arial, sans-serif" font-size="12" fill="#475569">• name - String</text>
    <text x="140" y="265" font-family="Arial, sans-serif" font-size="12" fill="#475569">• email_verified - Boolean</text>
    <text x="140" y="285" font-family="Arial, sans-serif" font-size="12" fill="#475569">• sub (UUID) - String</text>
    
    <!-- Groups -->
    <text x="120" y="315" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1e293b">User Groups:</text>
    <rect x="140" y="325" width="310" height="30" fill="#f3e8ff" stroke="#a78bfa" stroke-width="1" rx="5"/>
    <text x="295" y="345" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#6b21a8">admin - Full system access</text>
    
    <rect x="140" y="365" width="310" height="30" fill="#f3e8ff" stroke="#a78bfa" stroke-width="1" rx="5"/>
    <text x="295" y="385" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#6b21a8">editor - Create/edit posts</text>
    
    <rect x="140" y="405" width="310" height="30" fill="#f3e8ff" stroke="#a78bfa" stroke-width="1" rx="5"/>
    <text x="295" y="425" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#6b21a8">guest - Read-only access</text>
  </g>
  
  <!-- DynamoDB Posts Table -->
  <g id="dynamodb">
    <rect x="520" y="120" width="480" height="520" fill="#ffffff" stroke="#3b82f6" stroke-width="3" rx="10"/>
    <rect x="520" y="120" width="480" height="50" fill="#3b82f6" rx="10"/>
    <text x="760" y="152" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#ffffff">
      DynamoDB - Posts Table
    </text>
    
    <!-- Primary Key -->
    <rect x="540" y="190" width="440" height="40" fill="#dbeafe" stroke="#60a5fa" stroke-width="2" rx="5"/>
    <text x="760" y="215" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1e40af">
      Partition Key: postId (UUID)
    </text>
    
    <!-- Attributes -->
    <text x="540" y="255" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1e293b">Attributes:</text>
    
    <text x="560" y="280" font-family="Arial, sans-serif" font-size="12" fill="#475569">• title - String</text>
    <text x="560" y="300" font-family="Arial, sans-serif" font-size="12" fill="#475569">• content - String</text>
    <text x="560" y="320" font-family="Arial, sans-serif" font-size="12" fill="#475569">• author - String</text>
    <text x="560" y="340" font-family="Arial, sans-serif" font-size="12" fill="#475569">• authorEmail - String</text>
    <text x="560" y="360" font-family="Arial, sans-serif" font-size="12" fill="#475569">• authorName - String</text>
    <text x="560" y="380" font-family="Arial, sans-serif" font-size="12" fill="#475569">• tags - List [String]</text>
    <text x="560" y="400" font-family="Arial, sans-serif" font-size="12" fill="#475569">• status - String (draft | published)</text>
    <text x="560" y="420" font-family="Arial, sans-serif" font-size="12" fill="#475569">• mediaUrls - List [String]</text>
    <text x="560" y="440" font-family="Arial, sans-serif" font-size="12" fill="#475569">• views - Number</text>
    <text x="560" y="460" font-family="Arial, sans-serif" font-size="12" fill="#475569">• createdAt - Number (timestamp)</text>
    <text x="560" y="480" font-family="Arial, sans-serif" font-size="12" fill="#475569">• updatedAt - Number (timestamp)</text>
    <text x="560" y="500" font-family="Arial, sans-serif" font-size="12" fill="#475569">• publishedAt - Number (timestamp | null)</text>
    
    <!-- GSI -->
    <rect x="540" y="520" width="440" height="100" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="5"/>
    <text x="760" y="545" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#92400e">
      Global Secondary Index (GSI)
    </text>
    <text x="760" y="570" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#78716c">
      Index Name: CreatedAtIndex
    </text>
    <text x="760" y="590" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#78716c">
      Partition Key: createdAt
    </text>
    <text x="760" y="608" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#a8a29e">
      Used for: Sorting posts by date
    </text>
  </g>
  
  <!-- S3 Bucket -->
  <g id="s3">
    <rect x="1040" y="120" width="320" height="360" fill="#ffffff" stroke="#10b981" stroke-width="3" rx="10"/>
    <rect x="1040" y="120" width="320" height="50" fill="#10b981" rx="10"/>
    <text x="1200" y="152" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#ffffff">
      S3 - Media Bucket
    </text>
    
    <!-- Structure -->
    <text x="1060" y="200" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1e293b">Bucket Structure:</text>
    
    <text x="1080" y="230" font-family="Arial, sans-serif" font-size="12" fill="#475569">media/</text>
    <text x="1100" y="255" font-family="Arial, sans-serif" font-size="12" fill="#475569">└── {userEmail}/</text>
    <text x="1130" y="280" font-family="Arial, sans-serif" font-size="12" fill="#475569">├── {uuid}.jpg</text>
    <text x="1130" y="300" font-family="Arial, sans-serif" font-size="12" fill="#475569">├── {uuid}.png</text>
    <text x="1130" y="320" font-family="Arial, sans-serif" font-size="12" fill="#475569">├── {uuid}.gif</text>
    <text x="1130" y="340" font-family="Arial, sans-serif" font-size="12" fill="#475569">└── {uuid}.mp4</text>
    
    <!-- File Info -->
    <text x="1060" y="375" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1e293b">File Metadata:</text>
    <text x="1080" y="400" font-family="Arial, sans-serif" font-size="12" fill="#475569">• originalFileName - String</text>
    <text x="1080" y="420" font-family="Arial, sans-serif" font-size="12" fill="#475569">• uploadedBy - String (email)</text>
    <text x="1080" y="440" font-family="Arial, sans-serif" font-size="12" fill="#475569">• uploadedAt - Timestamp</text>
    <text x="1080" y="460" font-family="Arial, sans-serif" font-size="12" fill="#475569">• ContentType - String</text>
  </g>
  
  <!-- Relationships -->
  <g id="relationships">
    <!-- Cognito to Posts (horizontal arrow below Cognito) -->
    <path d="M 290 460 L 290 500 L 520 500 L 520 380" stroke="#64748b" stroke-width="3" fill="none" marker-end="url(#arrow)"/>
    <rect x="260" y="480" width="80" height="25" fill="#f8fafc"/>
    <text x="300" y="497" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#475569" text-anchor="middle">creates</text>
    
    <!-- Posts to S3 (arrow from right side of Posts to left side of S3) -->
    <path d="M 1000 300 L 1040 300" stroke="#64748b" stroke-width="3" fill="none" marker-end="url(#arrow)"/>
    <rect x="990" y="270" width="90" height="25" fill="#f8fafc"/>
    <text x="1020" y="287" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#475569" text-anchor="middle">references</text>
    
    <!-- User to S3 (curved arrow going above everything) -->
    <path d="M 290 120 Q 700 50 1200 120" stroke="#94a3b8" stroke-width="3" stroke-dasharray="5,5" fill="none" marker-end="url(#arrow-dashed)"/>
    <rect x="650" y="35" width="100" height="25" fill="#f8fafc"/>
    <text x="700" y="52" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#64748b" text-anchor="middle">uploads to</text>
  </g>
  
  <!-- Legend -->
  <g id="legend">
    <rect x="100" y="680" width="1260" height="280" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="2" rx="8"/>
    <text x="730" y="715" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#1e293b">
      Data Relationships &amp; Security
    </text>
    
    <!-- Access Patterns -->
    <rect x="120" y="740" width="600" height="200" fill="#ffffff" stroke="#e2e8f0" stroke-width="1" rx="6"/>
    <text x="420" y="765" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#1e293b">Access Patterns</text>
    <line x1="140" y1="775" x2="700" y2="775" stroke="#cbd5e1" stroke-width="1"/>
    
    <text x="140" y="800" font-family="Arial, sans-serif" font-size="12" fill="#475569">1. User Registration &amp; Authentication:</text>
    <text x="160" y="820" font-family="Arial, sans-serif" font-size="11" fill="#64748b">• Users sign up and authenticate via Cognito</text>
    <text x="160" y="838" font-family="Arial, sans-serif" font-size="11" fill="#64748b">• Receive JWT tokens for API access</text>
    
    <text x="140" y="865" font-family="Arial, sans-serif" font-size="12" fill="#475569">2. Content Creation:</text>
    <text x="160" y="885" font-family="Arial, sans-serif" font-size="11" fill="#64748b">• Authenticated users create posts stored in DynamoDB</text>
    <text x="160" y="903" font-family="Arial, sans-serif" font-size="11" fill="#64748b">• Posts linked to users via authorEmail attribute</text>
    
    <text x="140" y="930" font-family="Arial, sans-serif" font-size="12" fill="#475569">3. Media Management:</text>
    <text x="160" y="950" font-family="Arial, sans-serif" font-size="11" fill="#64748b">• Users upload media files to S3 in user-specific folders</text>
    
    <!-- Security -->
    <rect x="740" y="740" width="600" height="200" fill="#ffffff" stroke="#e2e8f0" stroke-width="1" rx="6"/>
    <text x="1040" y="765" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#1e293b">Security Features</text>
    <line x1="760" y1="775" x2="1320" y2="775" stroke="#cbd5e1" stroke-width="1"/>
    
    <text x="760" y="800" font-family="Arial, sans-serif" font-size="12" fill="#475569">Authentication &amp; Authorization:</text>
    <text x="780" y="820" font-family="Arial, sans-serif" font-size="11" fill="#64748b">• AWS Cognito manages user authentication</text>
    <text x="780" y="838" font-family="Arial, sans-serif" font-size="11" fill="#64748b">• Role-based access via Cognito groups</text>
    
    <text x="760" y="865" font-family="Arial, sans-serif" font-size="12" fill="#475569">Data Protection:</text>
    <text x="780" y="885" font-family="Arial, sans-serif" font-size="11" fill="#64748b">• All data encrypted at rest (S3, DynamoDB)</text>
    <text x="780" y="903" font-family="Arial, sans-serif" font-size="11" fill="#64748b">• S3 uses pre-signed URLs for secure time-limited access</text>
    
    <text x="760" y="930" font-family="Arial, sans-serif" font-size="12" fill="#475569">Access Control:</text>
    <text x="780" y="950" font-family="Arial, sans-serif" font-size="11" fill="#64748b">• Private S3 bucket with no public access</text>
  </g>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#64748b"/>
    </marker>
    <marker id="arrow-dashed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#94a3b8"/>
    </marker>
  </defs>
</svg>